angular.module("waitstaffApp",["ngMessages","ngRoute"]).factory("calculateTotals",function(){return{subtotal:0,tip:0,total:0,tipTotal:0,mealCount:0,avgTipPerMeal:0,getMealTotal:function(){subtotal=mealPrice*(1+taxRate/100),tip=mealPrice*(tipPercentage/100),total=subtotal+tip},getEarningsInfo:function(){tipTotal+=tip,mealCount+=1,avgTipPerMeal=tipTotal/mealCount},getTotalAndTip:function(){getMealTotal(),getEarningsInfo()},cancelTipForm:function(){mealPrice="",taxRate="",tipPercentage="",tipForm.$setPristine()},reset:function(){subtotal=0,tip=0,total=0,tipTotal=0,mealCount=0,avgTipPerMeal=0}}}).config(["$routeProvider",function(t){t.when("/",{templateUrl:"home.html",controller:"HomeCtrl",controllerAs:"vm"}).when("/my-earnings",{templateUrl:"my-earnings.html",controller:"EarningsCtrl",controllerAs:"vm"}).when("/new-meal",{templateUrl:"new-meal.html",controller:"MealCtrl",controllerAs:"vm"}).when("/error",{template:"<p>Error Page Not Found</p>"}).otherwise("/error")}]).controller("HomeCtrl",["calculateTotals",function(){var t=this}]).controller("EarningsCtrl",["calculateTotals",function(){var t=this}]).controller("MealCtrl",[function(){var t=this}]);